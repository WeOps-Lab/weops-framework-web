(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"u/C3":function(e,t,n){"use strict";n.r(t);var r,a=n("uMZD"),i=n("ac6i"),o=n("SeYB"),s=n("qz1i"),l=n("G0B5"),c=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.visible=!1,t.loading=!1,t.formData={username:""},t.rules={username:[{required:!0,message:"必填项",trigger:"blur"}]},t.userData=[],t}return c(t,e),t.prototype.show=function(){this.visible=!0,this.getUserList()},t.prototype.getUserList=function(){var e=this;this.$api.Server.getBkUsers({page_size:-1}).then((function(t){var n=t.result,r=t.data;if(!n)return!1;e.userData=r.items.filter((function(e){return e.bk_username})).map((function(e){return{key:e.bk_username,display:e.bk_username,chname:e.chname,displayKey:"".concat(e.chname,"(").concat(e.bk_username,")")}}))}))},t.prototype.close=function(){this.visible=!1},t.prototype.confirm=function(){var e=this;this.$refs.validateForm.validate().then((function(t){e.loading=!0,e.$api.Server.testEsb({interface_name:e.active,username:e.formData.username}).then((function(t){if(!t.result)return e.$error(t.message),!1;e.$success("测试成功！"),e.visible=!1})).finally((function(){e.loading=!1}))}))},t.prototype.closeDialog=function(){this.formData.username="",this.$refs.validateForm.clearError()},u([Object(l.d)({type:String})],t.prototype,"active",void 0),t=u([Object(l.a)({name:"test-notice"})],t)}(l.e),f=p,m=n("KHd+"),d=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("bk-dialog",{attrs:{position:{top:150},theme:"primary",width:"400","mask-close":!1,"header-position":"left",title:"测试"},on:{"after-leave":e.closeDialog},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading,zIndex:10},expression:"{ isLoading: loading, zIndex: 10 }"}],staticClass:"content-box"},[n("bk-form",{ref:"validateForm",attrs:{"label-width":70,model:e.formData,rules:e.rules}},[n("bk-form-item",{attrs:{label:"接收人",required:!0,property:"username"}},[n("bk-select",{staticStyle:{width:"100%"},attrs:{"popover-options":{appendTo:"parent"},"search-placeholder":"请选择接收人","search-with-pinyin":!0,"ext-cls":"select-custom","ext-popover-cls":"select-popover-custom",searchable:"","enable-virtual-scroll":"",list:e.userData,"id-key":"key","display-key":"display"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1)],1)],1),e._v(" "),n("template",{slot:"footer"},[n("bk-button",{staticClass:"mr10",attrs:{disabled:e.loading,theme:"primary",title:"确认"},on:{click:e.confirm}},[e._v("\n            确认\n        ")]),e._v(" "),n("bk-button",{attrs:{theme:"default",type:"submit",title:"取消"},on:{click:e.close}},[e._v("\n            取消\n        ")])],1)],2)}),[],!1,null,null,null).exports,b=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panels=[{name:"send_mail",label:"邮件"},{name:"send_sms",label:"短信"},{name:"send_voice",label:"电话"},{name:"send_weixin",label:"微信"}],t.active="send_mail",t.pageUrl="",t.urlMap={send_mail:o.a.emailNotice,send_sms:o.a.msgNotice,send_voice:o.a.mobileNotice,send_weixin:o.a.weiXinNotice},t}return b(t,e),t.prototype.mounted=function(){this.pageUrl=this.urlMap[this.active]},t.prototype.toTabMenu=function(e){this.active=e.name,this.pageUrl=this.urlMap[this.active]},t.prototype.testNotice=function(){this.$refs.testNotice.show()},t=v([Object(l.a)({name:"notice-ways",components:{menuTab:i.a,WikiIframe:s.a,HeaderSub:a.a,testNotice:d}})],t)}(l.e),h=y,_=Object(m.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"notice-ways"},[n("header-sub",{staticClass:"notice-manage-header"},[n("template",{slot:"title"},[n("menu-tab",{attrs:{panels:e.panels,type:"line","active-panel":e.active},on:{click:e.toTabMenu}})],1)],2),e._v(" "),n("bk-button",{staticClass:"test-btn",attrs:{size:"small",theme:"primary",title:"测试"},on:{click:e.testNotice}},[e._v("测试")]),e._v(" "),n("div",{staticClass:"main-box"},[n("div",{ref:"iframeWraper",staticClass:"iframe-wrapper"},[n("wiki-iframe",{attrs:{url:e.pageUrl,name:e.active,link:"noticeWays"}})],1)]),e._v(" "),n("test-notice",{ref:"testNotice",attrs:{active:e.active}})],1)}),[],!1,null,"02025566",null);t.default=_.exports}}]);